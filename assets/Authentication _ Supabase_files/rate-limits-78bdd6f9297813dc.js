(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5589],{29345:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/rate-limits",function(){return n(5261)}])},62697:function(e,s,n){"use strict";n.d(s,{F:function(){return t},n:function(){return r}});let r=e=>{var s;return!!((null==e?void 0:e.SMTP_ADMIN_EMAIL)&&(null==e?void 0:e.SMTP_SENDER_NAME)&&(null==e?void 0:e.SMTP_USER)&&(null==e?void 0:e.SMTP_HOST)&&(null==e?void 0:e.SMTP_PASS)&&(null==e?void 0:e.SMTP_PORT)&&(null!==(s=null==e?void 0:e.SMTP_MAX_FREQUENCY)&&void 0!==s?s:0)>=0)},t=e=>{var s,n,t,i,l,a,o,d;return{ENABLE_SMTP:r(e),SMTP_ADMIN_EMAIL:null!==(s=null==e?void 0:e.SMTP_ADMIN_EMAIL)&&void 0!==s?s:"",SMTP_SENDER_NAME:null!==(n=null==e?void 0:e.SMTP_SENDER_NAME)&&void 0!==n?n:"",SMTP_USER:null!==(t=null==e?void 0:e.SMTP_USER)&&void 0!==t?t:"",SMTP_HOST:null!==(i=null==e?void 0:e.SMTP_HOST)&&void 0!==i?i:"",SMTP_PASS:null!==(l=null==e?void 0:e.SMTP_PASS)&&void 0!==l?l:"",SMTP_PORT:null!==(a=null==e?void 0:e.SMTP_PORT)&&void 0!==a?a:"465",SMTP_MAX_FREQUENCY:null!==(o=null==e?void 0:e.SMTP_MAX_FREQUENCY)&&void 0!==o?o:60,RATE_LIMIT_EMAIL_SENT:null!==(d=null==e?void 0:e.RATE_LIMIT_EMAIL_SENT)&&void 0!==d?d:30}}},14698:function(e,s,n){"use strict";n.d(s,{iN:function(){return f},ph:function(){return u},by:function(){return j},hj:function(){return x},B4:function(){return E},S0:function(){return m},ld:function(){return t}});var r=n(52322);function t(e){return(0,r.jsxs)("div",{className:"mx-auto max-w-4xl px-5 pt-12 pb-20",children:[e.header&&(0,r.jsx)("h1",{className:"text-foreground mb-8 text-3xl",children:e.header}),(0,r.jsx)("div",{className:"space-y-20",children:e.children})]})}var i=n(17172),l=n(39097),a=n.n(l),o=n(14048),d=n(80435),c=n(32079);let u=e=>{let{title:s,description:n,docsUrl:t,actions:l,className:u}=e;return(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between ".concat(u),children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h3",{className:"text-foreground text-xl",children:(0,r.jsx)(o.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:s})}),n&&(0,r.jsx)(d.U,{content:n,className:"max-w-full"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[void 0!==t&&(0,r.jsx)(c.z,{asChild:!0,type:"default",icon:(0,r.jsx)(i.Z,{size:14}),children:(0,r.jsx)(a(),{href:t,target:"_blank",rel:"noreferrer",children:"Documentation"})}),l]})]})};var h=n(2784);let x=e=>{let{children:s,id:n,header:t,disabled:i,className:l}=e;return(0,r.jsxs)("div",{id:n,className:["grid grid-cols-12 gap-6 px-8 py-8","".concat(i?" opacity-30":" opacity-100"),"".concat(l)].join(" "),children:[t,s]})},m=e=>{let{children:s,className:n="",description:t}=e;return void 0!==t?(0,r.jsxs)("div",{className:"flex flex-col space-y-2 col-span-12 lg:col-span-5 ".concat(n),children:[(0,r.jsx)("label",{className:"text-foreground text-sm",children:s}),t]}):(0,r.jsx)("label",{className:"text-foreground col-span-12 text-sm lg:col-span-5 ".concat(n),children:s})},_=()=>(0,r.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,r.jsx)("div",{className:"shimmering-loader h-2 w-1/3 rounded"}),(0,r.jsx)("div",{className:"flex flex-col justify-between space-y-2",children:(0,r.jsx)("div",{className:"shimmering-loader h-[34px] w-2/3 rounded"})})]}),E=e=>{let{children:s,loading:n=!0,fullWidth:t,className:i}=e;return(0,r.jsx)("div",{className:"\n        relative col-span-12 flex flex-col gap-6 lg:col-span-7\n        ".concat(t&&"!col-span-12","\n        ").concat(i,"\n      "),children:n?h.Children.map(s,()=>(0,r.jsx)(_,{})):s})},j=e=>{let{children:s,header:n,footer:t}=e;return(0,r.jsxs)("div",{className:" bg-surface-100 border-default overflow-hidden  rounded-md border shadow",children:[n&&(0,r.jsx)("div",{className:"border-default border-b px-8 py-4",children:n}),(0,r.jsx)("div",{className:"divide-border flex flex-col gap-0 divide-y",children:s}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"border-default border-t"}),t]})]})},f=e=>{let{form:s,hasChanges:n,handleReset:t,helper:i,disabled:l=!1,isSubmitting:a,submitText:o="Save"}=e,d=a||l||!n&&void 0!==n;return(0,r.jsxs)("div",{className:["flex w-full items-center gap-2",i?"justify-between":"justify-end"].join(" "),children:[i&&(0,r.jsx)("span",{className:"text-sm text-foreground-lighter",children:i}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(c.z,{disabled:d,type:"default",htmlType:"reset",onClick:()=>t(),children:"Cancel"}),(0,r.jsx)(c.z,{form:s,type:"primary",htmlType:"submit",disabled:d,loading:a,children:o})]})]})}},95569:function(e,s,n){"use strict";n.d(s,{_:function(){return d}});var r=n(85945),t=n(48228),i=n(62202),l=n(31696),a=n(7161);async function o(e){let{projectRef:s,config:n}=e,{data:r,error:t}=await (0,l.r$)("/platform/auth/{ref}/config",{params:{path:{ref:s}},body:{...n}});return t&&(0,l.S3)(t),r}let d=function(){let{onSuccess:e,onError:s,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,r.NL)();return(0,t.D)(e=>o(e),{async onSuccess(s,n,r){let{projectRef:t}=n;await l.invalidateQueries(a.o.authConfig(t)),await (null==e?void 0:e(s,n,r))},async onError(e,n,r){void 0===s?i.ZP.error("Failed to update auth configuration: ".concat(e.message)):s(e,n,r)},...n})}},5261:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return A}});var r=n(52322),t=n(59491),i=n(88883),l=n(99959),a=n(39097),o=n.n(a),d=n(2784),c=n(63955),u=n(22574),h=n(42070),x=n(95492),m=n(32079),_=n(30195),E=n(56006),j=n(14698),f=n(41679),T=n(33635),p=n(95569),N=n(14528),S=n(62202),M=n(70847),g=n(62697),I=()=>{let e="auth-rate-limits-form",{ref:s}=(0,l.UO)(),n=(0,N.Xo)(t.KA.UPDATE,"custom_config_gotrue"),{data:a,error:I,isLoading:v,isError:b,isSuccess:R}=(0,T.$E)({projectRef:s}),{mutate:A,isLoading:y}=(0,p._)({onSuccess:()=>{S.ZP.success("Rate limits successfully updated")},onError:e=>{S.ZP.error("Failed to update rate limits: ".concat(e.message))}}),L=(null==a?void 0:a.EXTERNAL_EMAIL_ENABLED)&&(0,g.n)(a),P=(null==a?void 0:a.EXTERNAL_PHONE_ENABLED)&&!(null==a?void 0:a.SMS_AUTOCONFIRM),w=null==a?void 0:a.EXTERNAL_ANONYMOUS_USERS_ENABLED,O=_.Ry({RATE_LIMIT_TOKEN_REFRESH:_.oQ.number().min(0,"Must be not be lower than 0").max(32767,"Must not be more than 32,767 an 5 minutes"),RATE_LIMIT_VERIFY:_.oQ.number().min(0,"Must be not be lower than 0").max(32767,"Must not be more than 32,767 an 5 minutes"),RATE_LIMIT_EMAIL_SENT:_.oQ.number().min(0,"Must be not be lower than 0").max(32767,"Must not be more than 32,767 an hour"),RATE_LIMIT_SMS_SENT:_.oQ.number().min(0,"Must be not be lower than 0").max(32767,"Must not be more than 32,767 an hour"),RATE_LIMIT_ANONYMOUS_USERS:_.oQ.number().min(0,"Must be not be lower than 0").max(32767,"Must not be more than 32,767 an hour")}),F=(0,c.cI)({resolver:(0,i.F)(O),defaultValues:{RATE_LIMIT_TOKEN_REFRESH:0,RATE_LIMIT_VERIFY:0,RATE_LIMIT_EMAIL_SENT:0,RATE_LIMIT_SMS_SENT:0}});return(0,d.useEffect)(()=>{R&&F.reset({RATE_LIMIT_TOKEN_REFRESH:a.RATE_LIMIT_TOKEN_REFRESH,RATE_LIMIT_VERIFY:a.RATE_LIMIT_VERIFY,RATE_LIMIT_EMAIL_SENT:a.RATE_LIMIT_EMAIL_SENT,RATE_LIMIT_SMS_SENT:a.RATE_LIMIT_SMS_SENT,RATE_LIMIT_ANONYMOUS_USERS:a.RATE_LIMIT_ANONYMOUS_USERS})},[R]),(0,r.jsxs)("div",{children:[(0,r.jsx)(j.ph,{title:"Rate Limits",description:"Safeguard against bursts of incoming traffic to prevent abuse and maximize stability",docsUrl:"https://supabase.com/docs/guides/platform/going-into-prod#rate-limiting-resource-allocation--abuse-prevention"}),b&&(0,r.jsx)(E.Z,{subject:"Failed to retrieve auth config rate limits",error:I}),v&&(0,r.jsx)(f.A,{}),R&&(0,r.jsx)(u.l0,{...F,children:(0,r.jsx)("form",{id:e,className:"space-y-4",onSubmit:F.handleSubmit(e=>{if(!s)return console.error("Project ref is required");let n={};["RATE_LIMIT_TOKEN_REFRESH","RATE_LIMIT_VERIFY","RATE_LIMIT_EMAIL_SENT","RATE_LIMIT_SMS_SENT","RATE_LIMIT_ANONYMOUS_USERS"].forEach(s=>{e[s]!==(null==a?void 0:a[s])&&(n[s]=e[s])}),A({projectRef:s,config:n},{onSuccess:()=>F.reset(e)})}),children:(0,r.jsxs)(j.by,{footer:(0,r.jsx)("div",{className:"flex py-4 px-8",children:(0,r.jsx)(j.iN,{form:e,isSubmitting:y,hasChanges:F.formState.isDirty,handleReset:()=>F.reset(),disabled:!n,helper:n?void 0:"You need additional permissions to update authentication settings"})}),children:[(0,r.jsx)(j.hj,{id:"email-sent",header:(0,r.jsx)(j.S0,{description:(0,r.jsx)("p",{className:"text-foreground-light text-sm",children:"Number of emails that can be sent per hour from your project"}),children:"Rate limit for sending emails"}),children:(0,r.jsx)(j.B4,{loading:!1,children:(0,r.jsx)(u.Wi,{control:F.control,name:"RATE_LIMIT_EMAIL_SENT",render:e=>{let{field:n}=e;return(0,r.jsxs)(u.xJ,{children:[(0,r.jsx)(u.NI,{children:(0,r.jsx)(h.I,{disabled:!L,type:"number",...n})}),a.EXTERNAL_EMAIL_ENABLED?(0,g.n)(a)?null:(0,r.jsxs)(x.bZ,{children:[(0,r.jsx)(M.aN,{}),(0,r.jsx)(x.Cd,{children:"Custom SMTP provider is required to update this configuration"}),(0,r.jsxs)(x.X,{className:"flex flex-col gap-y-3",children:[(0,r.jsx)("p",{className:"!leading-tight",children:"The built-in email service has a fixed rate limit. You will need to set up your own custom SMTP provider to update your email rate limit"}),(0,r.jsx)(m.z,{asChild:!0,type:"default",className:"w-min",children:(0,r.jsx)(o(),{href:"/project/".concat(s,"/settings/auth"),children:"View SMTP settings"})})]})]}):(0,r.jsxs)(x.bZ,{children:[(0,r.jsx)(M.aN,{}),(0,r.jsx)(x.Cd,{children:"Email-based logins are not enabled for your project"}),(0,r.jsxs)(x.X,{className:"flex flex-col gap-y-3",children:[(0,r.jsx)("p",{className:"!leading-tight",children:"Enable email-based logins to update this rate limit"}),(0,r.jsx)(m.z,{asChild:!0,type:"default",className:"w-min",children:(0,r.jsx)(o(),{href:"/project/".concat(s,"/auth/providers"),children:"View auth providers"})})]})]})]})}})})}),(0,r.jsx)(j.hj,{id:"sms-sent",header:(0,r.jsx)(j.S0,{description:(0,r.jsx)("p",{className:"text-foreground-light text-sm",children:"Number of SMS messages that can be sent per hour from your project"}),children:"Rate limit for sending SMS messages"}),children:(0,r.jsx)(j.B4,{loading:!1,children:(0,r.jsx)(u.Wi,{control:F.control,name:"RATE_LIMIT_SMS_SENT",render:e=>{let{field:n}=e;return(0,r.jsxs)(u.xJ,{children:[(0,r.jsx)(u.NI,{children:(0,r.jsx)(h.I,{disabled:!P,type:"number",...n})}),!P&&(0,r.jsxs)(x.bZ,{children:[(0,r.jsx)(M.aN,{}),(0,r.jsx)(x.Cd,{children:"Phone-based logins are not enabled for your project"}),(0,r.jsxs)(x.X,{className:"flex flex-col gap-y-3",children:[(0,r.jsx)("p",{className:"!leading-tight",children:"Enable phone-based logins to update this rate limit"}),(0,r.jsx)(m.z,{asChild:!0,type:"default",className:"w-min",children:(0,r.jsx)(o(),{href:"/project/".concat(s,"/auth/providers"),children:"View auth providers"})})]})]})]})}})})}),(0,r.jsx)(j.hj,{id:"token-refresh",header:(0,r.jsx)(j.S0,{description:(0,r.jsx)("p",{className:"text-foreground-light text-sm",children:"Number of sessions that can be refreshed in a 5 minute interval per IP address."}),children:"Rate limit for token refreshes"}),children:(0,r.jsx)(j.B4,{loading:!1,children:(0,r.jsx)(u.Wi,{control:F.control,name:"RATE_LIMIT_TOKEN_REFRESH",render:e=>{let{field:s}=e;return(0,r.jsxs)(u.xJ,{children:[(0,r.jsx)(u.NI,{children:(0,r.jsx)(h.I,{type:"number",...s})}),s.value>0&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("p",{className:"text-foreground-lighter text-sm",children:["This is equivalent to ",12*s.value," requests per hour"]})})]})}})})}),(0,r.jsx)(j.hj,{id:"verify",header:(0,r.jsx)(j.S0,{description:(0,r.jsx)("p",{className:"text-foreground-light text-sm",children:"Number of OTP/Magic link verifications that can be made in a 5 minute interval per IP address."}),children:"Rate limit for token verifications"}),children:(0,r.jsx)(j.B4,{loading:!1,children:(0,r.jsx)(u.Wi,{control:F.control,name:"RATE_LIMIT_VERIFY",render:e=>{let{field:s}=e;return(0,r.jsxs)(u.xJ,{children:[(0,r.jsx)(u.NI,{children:(0,r.jsx)(h.I,{type:"number",...s})}),s.value>0&&(0,r.jsxs)("p",{className:"text-foreground-lighter text-sm",children:["This is equivalent to ",12*s.value," requests per hour"]})]})}})})}),(0,r.jsx)(j.hj,{id:"anonymous-users",header:(0,r.jsx)(j.S0,{description:(0,r.jsx)("p",{className:"text-foreground-light text-sm",children:"Number of anonymous sign-ins that can be made per hour per IP address."}),children:"Rate limit for anonymous users"}),children:(0,r.jsx)(j.B4,{loading:!1,children:(0,r.jsx)(u.Wi,{control:F.control,name:"RATE_LIMIT_ANONYMOUS_USERS",render:e=>{let{field:n}=e;return(0,r.jsxs)(u.xJ,{children:[(0,r.jsx)(u.NI,{children:(0,r.jsx)(h.I,{disabled:!w,type:"number",...n})}),!w&&(0,r.jsxs)(x.bZ,{children:[(0,r.jsx)(M.aN,{}),(0,r.jsx)(x.Cd,{children:"Anonymous logins are not enabled for your project"}),(0,r.jsxs)(x.X,{className:"flex flex-col gap-y-3",children:[(0,r.jsx)("p",{className:"!leading-tight",children:"Enable anonymous logins to update this rate limit"}),(0,r.jsx)(m.z,{asChild:!0,type:"default",className:"w-min",children:(0,r.jsx)(o(),{href:"/project/".concat(s,"/settings/auth"),children:"View auth settings"})})]})]})]})}})})})]})})})]})},v=n(7929),b=n(14782);let R=()=>{let e=(0,N.Xo)(t.KA.READ,"custom_config_gotrue");return(0,N.N4)()&&!e?(0,r.jsx)(b.Z,{isFullPage:!0,resourceText:"access your project's auth rate limit settings"}):(0,r.jsx)(j.ld,{children:(0,r.jsx)(I,{})})};R.getLayout=e=>(0,r.jsx)(v.g1,{children:e});var A=R}},function(e){e.O(0,[667,9678,8183,8421,3844,9785,7263,9818,9595,5191,7127,9104,6917,7309,9229,3832,8475,626,496,1273,8020,7298,9774,2888,179],function(){return e(e.s=29345)}),_N_E=e.O()}]);
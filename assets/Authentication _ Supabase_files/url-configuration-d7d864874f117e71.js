(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5117],{71372:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/url-configuration",function(){return s(80593)}])},35648:function(e,r,s){"use strict";s.d(r,{y:function(){return t}});let t=RegExp("(".concat(/^((ftp|http|https):\/\/)?(www.)?(?!.*(ftp|http|https|www.))[a-zA-Z0-9_*-]+(\.[a-zA-Z0-9_*-]+)+((\/)[\w#]+)*(\/\w+\?[a-zA-Z0-9_]+=\w+(&[a-zA-Z0-9_]+=\w+)*)+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))(.*)?\/?(.)*?$/gm.source,")|(").concat(/^(?:^|\s)((https?:\/\/)?(?:localhost|[\w-]+(?:\.[\w-]+)+)(:\d+)?(\/\S*)?)/i.source,")|(").concat(/^[a-z0-9-]+([.][a-z0-9]+)*:\/(\/[-a-z0-9._~!$&'()*+,;=:@%]+)+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))(.*)?\/?(.)*?$/i.source,")|(").concat(/chrome-extension:\/\/([a-zA-Z]*)/gm.source,")|(").concat(/^([a-zA-Z][a-zA-Z0-9+.-]*):(?:\/{1,3})?([a-zA-Z0-9_.-]*)$/.source,")"),"i")},14698:function(e,r,s){"use strict";s.d(r,{iN:function(){return v},ph:function(){return u},by:function(){return j},hj:function(){return h},B4:function(){return p},S0:function(){return m},ld:function(){return i}});var t=s(52322);function i(e){return(0,t.jsxs)("div",{className:"mx-auto max-w-4xl px-5 pt-12 pb-20",children:[e.header&&(0,t.jsx)("h1",{className:"text-foreground mb-8 text-3xl",children:e.header}),(0,t.jsx)("div",{className:"space-y-20",children:e.children})]})}var n=s(17172),l=s(39097),a=s.n(l),o=s(14048),c=s(80435),d=s(32079);let u=e=>{let{title:r,description:s,docsUrl:i,actions:l,className:u}=e;return(0,t.jsxs)("div",{className:"mb-6 flex items-center justify-between ".concat(u),children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h3",{className:"text-foreground text-xl",children:(0,t.jsx)(o.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:r})}),s&&(0,t.jsx)(c.U,{content:s,className:"max-w-full"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[void 0!==i&&(0,t.jsx)(d.z,{asChild:!0,type:"default",icon:(0,t.jsx)(n.Z,{size:14}),children:(0,t.jsx)(a(),{href:i,target:"_blank",rel:"noreferrer",children:"Documentation"})}),l]})]})};var x=s(2784);let h=e=>{let{children:r,id:s,header:i,disabled:n,className:l}=e;return(0,t.jsxs)("div",{id:s,className:["grid grid-cols-12 gap-6 px-8 py-8","".concat(n?" opacity-30":" opacity-100"),"".concat(l)].join(" "),children:[i,r]})},m=e=>{let{children:r,className:s="",description:i}=e;return void 0!==i?(0,t.jsxs)("div",{className:"flex flex-col space-y-2 col-span-12 lg:col-span-5 ".concat(s),children:[(0,t.jsx)("label",{className:"text-foreground text-sm",children:r}),i]}):(0,t.jsx)("label",{className:"text-foreground col-span-12 text-sm lg:col-span-5 ".concat(s),children:r})},f=()=>(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,t.jsx)("div",{className:"shimmering-loader h-2 w-1/3 rounded"}),(0,t.jsx)("div",{className:"flex flex-col justify-between space-y-2",children:(0,t.jsx)("div",{className:"shimmering-loader h-[34px] w-2/3 rounded"})})]}),p=e=>{let{children:r,loading:s=!0,fullWidth:i,className:n}=e;return(0,t.jsx)("div",{className:"\n        relative col-span-12 flex flex-col gap-6 lg:col-span-7\n        ".concat(i&&"!col-span-12","\n        ").concat(n,"\n      "),children:s?x.Children.map(r,()=>(0,t.jsx)(f,{})):r})},j=e=>{let{children:r,header:s,footer:i}=e;return(0,t.jsxs)("div",{className:" bg-surface-100 border-default overflow-hidden  rounded-md border shadow",children:[s&&(0,t.jsx)("div",{className:"border-default border-b px-8 py-4",children:s}),(0,t.jsx)("div",{className:"divide-border flex flex-col gap-0 divide-y",children:r}),i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"border-default border-t"}),i]})]})},v=e=>{let{form:r,hasChanges:s,handleReset:i,helper:n,disabled:l=!1,isSubmitting:a,submitText:o="Save"}=e,c=a||l||!s&&void 0!==s;return(0,t.jsxs)("div",{className:["flex w-full items-center gap-2",n?"justify-between":"justify-end"].join(" "),children:[n&&(0,t.jsx)("span",{className:"text-sm text-foreground-lighter",children:n}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.z,{disabled:c,type:"default",htmlType:"reset",onClick:()=>i(),children:"Cancel"}),(0,t.jsx)(d.z,{form:r,type:"primary",htmlType:"submit",disabled:c,loading:a,children:o})]})]})}},92138:function(e,r,s){"use strict";s.d(r,{p:function(){return i}});var t=s(52322);let i=()=>(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,t.jsx)("div",{className:"shimmering-loader h-6 w-6 rounded-full"}),(0,t.jsx)("div",{className:"shimmering-loader h-2 w-32 rounded"})]}),(0,t.jsx)("div",{className:"shimmering-loader h-6 w-20 rounded"})]})},7999:function(e,r,s){"use strict";var t=s(52322),i=s(5632),n=s(62029);r.Z=e=>{let{message:r}=e,s=(0,i.useRouter)(),{ref:l}=s.query;return(0,t.jsx)(n.Z,{title:"No public tables found",ctaButtonLabel:"Create a new table",onClickCta:()=>{s.push("/project/".concat(l,"/editor"))},children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:r})})}},95569:function(e,r,s){"use strict";s.d(r,{_:function(){return c}});var t=s(85945),i=s(48228),n=s(62202),l=s(31696),a=s(7161);async function o(e){let{projectRef:r,config:s}=e,{data:t,error:i}=await (0,l.r$)("/platform/auth/{ref}/config",{params:{path:{ref:r}},body:{...s}});return i&&(0,l.S3)(i),t}let c=function(){let{onSuccess:e,onError:r,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,t.NL)();return(0,i.D)(e=>o(e),{async onSuccess(r,s,t){let{projectRef:i}=s;await l.invalidateQueries(a.o.authConfig(i)),await (null==e?void 0:e(r,s,t))},async onError(e,s,t){void 0===r?n.ZP.error("Failed to update auth configuration: ".concat(e.message)):r(e,s,t)},...s})}},80593:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return P}});var t=s(52322),i=s(59491),n=s(24990),l=s(99959),a=s(39097),o=s.n(a),c=s(2784),d=s(62202),u=s(32079),x=s(32830),h=s(95492),m=s(39459),f=s(47852),p=s(62277),j=s(750),v=s(48601),g=s(14698),b=s(92138),y=s(33635),w=s(95569),N=s(14528),L=s(35648),R=s(34291),_=s.n(R),U=s(15434),S=s(62134);let z=e=>{let{title:r,description:s}=e;return(0,t.jsxs)("div",{className:" flex flex-col items-center justify-center  gap-6 text-center ",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("div",{className:"relative flex h-4 w-32 items-center rounded border border-dashed px-2"}),(0,t.jsx)("div",{className:"relative flex h-4 w-32 items-center rounded border border-dashed px-2",children:(0,t.jsx)("div",{className:"absolute right-1 -bottom-4",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 px-5",children:[(0,t.jsx)("h3",{className:"text-foreground text-sm",children:r}),(0,t.jsx)("p",{className:"text-foreground-lighter text-sm",children:s})]})]})};s(7999);var Z=e=>{let{children:r}=e;return(0,t.jsx)("div",{className:" bg-surface-100 border-default text-foreground flex items-center  justify-between gap-2 border px-6  py-4 text-sm first:rounded-tr first:rounded-tl last:rounded-br last:rounded-bl ",children:r})},k=e=>{let{URI_ALLOW_LIST_ARRAY:r,canUpdate:s,onSelectUrlToDelete:i=_()}=e;return(0,t.jsx)("div",{className:"-space-y-px",children:r.length>0?r.map(e=>(0,t.jsxs)(Z,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 font-mono",children:[(0,t.jsx)("span",{className:"text-foreground-lighter",children:(0,t.jsx)(U.Z,{strokeWidth:2,size:14})}),(0,t.jsx)("span",{className:"text-sm",children:e})]}),s&&(0,t.jsx)(u.z,{type:"default",icon:(0,t.jsx)(S.Z,{}),onClick:()=>i(e),children:"Remove"})]},e)):(0,t.jsx)("div",{className:"flex items-center border-overlay bg-studio text-foreground justify-center gap-2 rounded border px-6 py-8 text-sm",children:(0,t.jsx)(z,{title:"No Redirect URLs",description:"Auth providers may need a URL to redirect back to"})})})},A=()=>{let{ref:e}=(0,l.UO)(),{data:r,error:s,isLoading:a,isError:R,isSuccess:_}=(0,y.$E)({projectRef:e}),{mutate:U,isLoading:S}=(0,w._)(),z=(0,c.useMemo)(()=>(null==r?void 0:r.URI_ALLOW_LIST)?r.URI_ALLOW_LIST.split(/\s*[,]+\s*/).filter(e=>e):[],[null==r?void 0:r.URI_ALLOW_LIST]),[A,C]=(0,c.useState)(!1),[E,O]=(0,c.useState)(),T=(0,N.Xo)(i.KA.UPDATE,"custom_config_gotrue"),I=(0,v.object)({url:(0,v.string)().matches(L.y,"URL is not valid").required()}),P=async r=>{if(!r.url)return;z.push(r.url.replace(/,\s*$/,""));let s=z.toString();if(s.length>2048)return d.ZP.error("Too many redirect URLs, please remove some or try to use wildcards");U({projectRef:e,config:{URI_ALLOW_LIST:s}},{onError:e=>{d.ZP.error("Failed to update URL: ".concat(null==e?void 0:e.message))},onSuccess:()=>{C(!1),d.ZP.success("Successfully added URL")}})},W=async r=>{r&&U({projectRef:e,config:{URI_ALLOW_LIST:z.filter(e=>e!==r).toString()}},{onError:e=>{d.ZP.error("Failed to remove URL: ".concat(null==e?void 0:e.message))},onSuccess:()=>{O(void 0),d.ZP.success("Successfully removed URL")}})};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(g.ph,{title:"Redirect URLs",description:"URLs that auth providers are permitted to redirect to post authentication. Wildcards are allowed, for example, https://*.domain.com"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-6 ml-12",children:[(0,t.jsx)(u.z,{asChild:!0,type:"default",icon:(0,t.jsx)(x.Z,{}),children:(0,t.jsx)(o(),{href:"https://supabase.com/docs/guides/auth/concepts/redirect-urls",target:"_blank",rel:"noreferrer",children:"Documentation"})}),(0,t.jsxs)(n.fC,{delayDuration:0,children:[(0,t.jsx)(n.xz,{asChild:!0,children:(0,t.jsx)(u.z,{disabled:!T,onClick:()=>C(!0),children:"Add URL"})}),!T&&(0,t.jsx)(n.h_,{children:(0,t.jsxs)(n.VY,{side:"bottom",children:[(0,t.jsx)(n.Eh,{className:"radix-tooltip-arrow"}),(0,t.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,t.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to update redirect URLs"})})]})})]})]})]}),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z,{children:(0,t.jsx)(b.p,{})}),(0,t.jsx)(Z,{children:(0,t.jsx)(b.p,{})})]}),R&&(0,t.jsxs)(h.bZ,{variant:"destructive",children:[(0,t.jsx)(m.Z,{strokeWidth:2}),(0,t.jsx)(h.Cd,{children:"Failed to retrieve auth configuration"}),(0,t.jsx)(h.X,{children:s.message})]}),_&&(0,t.jsx)(k,{URI_ALLOW_LIST_ARRAY:z,canUpdate:T,onSelectUrlToDelete:O}),(0,t.jsx)(f.C,{hideFooter:!0,size:"small",visible:A,onCancel:()=>C(!A),header:(0,t.jsx)("h3",{className:"text-sm",children:"Add a new URL"}),children:(0,t.jsx)(p.Z,{validateOnBlur:!0,id:"new-redirect-url-form",initialValues:{url:""},validationSchema:I,onSubmit:P,children:()=>(0,t.jsxs)("div",{className:"mb-4 space-y-4 pt-4",children:[(0,t.jsx)("div",{className:"px-5",children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"This will add a URL to a list of allowed URLs that can interact with your Authentication services for this project."})}),(0,t.jsx)("div",{className:"border-overlay-border border-t"}),(0,t.jsx)("div",{className:"px-5",children:(0,t.jsx)(j.Z,{id:"url",name:"url",label:"URL",placeholder:"https://mydomain.com"})}),(0,t.jsx)("div",{className:"border-overlay-border border-t"}),(0,t.jsx)("div",{className:"px-5",children:(0,t.jsx)(u.z,{block:!0,form:"new-redirect-url-form",htmlType:"submit",size:"medium",disabled:S,loading:S,children:"Add URL"})})]})})}),(0,t.jsx)(f.C,{hideFooter:!0,size:"small",visible:void 0!==E,header:(0,t.jsx)("h3",{className:"text-sm",children:"Remove URL"}),onCancel:()=>O(void 0),children:(0,t.jsxs)("div",{className:"mb-4 space-y-4 pt-4",children:[(0,t.jsxs)("div",{className:"px-5",children:[(0,t.jsxs)("p",{className:"mb-2 text-sm text-foreground-light",children:["Are you sure you want to remove"," ",(0,t.jsx)("span",{className:"text-foreground",children:E}),"?"]}),(0,t.jsx)("p",{className:"text-foreground-light text-sm",children:"This URL will no longer work with your authentication configuration."})]}),(0,t.jsx)("div",{className:"border-overlay-border border-t"}),(0,t.jsxs)("div",{className:"flex gap-3 px-5",children:[(0,t.jsx)(u.z,{block:!0,type:"default",size:"medium",onClick:()=>O(void 0),children:"Cancel"}),(0,t.jsx)(u.z,{block:!0,size:"medium",type:"warning",loading:S,onClick:()=>W(E),children:S?"Removing...":"Remove URL"})]})]})})]})};let C=(0,v.object)({SITE_URL:(0,v.string)().required("Must have a Site URL")});var E=()=>{let{ref:e}=(0,l.UO)(),{data:r,error:s,isLoading:n,isError:a,isSuccess:o}=(0,y.$E)({projectRef:e}),{mutate:u,isLoading:x}=(0,w._)(),f="auth-config-general-form",v=(0,N.Xo)(i.KA.UPDATE,"custom_config_gotrue"),b={SITE_URL:null==r?void 0:r.SITE_URL};return a?(0,t.jsxs)(h.bZ,{variant:"destructive",children:[(0,t.jsx)(m.Z,{strokeWidth:2}),(0,t.jsx)(h.Cd,{children:"Failed to retrieve auth configuration"}),(0,t.jsx)(h.X,{children:s.message})]}):(0,t.jsx)(p.Z,{id:f,initialValues:b,onSubmit:(r,s)=>{let{resetForm:t}=s;u({projectRef:e,config:{...r}},{onError:()=>{d.ZP.error("Failed to update settings")},onSuccess:()=>{d.ZP.success("Successfully updated settings"),t({values:r,initialValues:r})}})},validationSchema:C,children:e=>{let{handleReset:r,resetForm:s,values:i,initialValues:l}=e,a=JSON.stringify(i)!==JSON.stringify(l);return(0,c.useEffect)(()=>{o&&s({values:b,initialValues:b})},[o]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.ph,{title:"Site URL",description:"Configure the default redirect URL used when a redirect URL is not specified or doesn't match one from the allow list. This value is also exposed as a template variable in the email templates section. Wildcards cannot be used here."}),(0,t.jsx)(g.by,{disabled:!0,footer:(0,t.jsx)("div",{className:"flex py-4 px-8",children:(0,t.jsx)(g.iN,{form:f,isSubmitting:x,hasChanges:a,handleReset:r,disabled:!v,helper:v?void 0:"You need additional permissions to update authentication settings"})}),children:(0,t.jsx)(g.hj,{children:(0,t.jsx)(g.B4,{loading:n,children:(0,t.jsx)(j.Z,{id:"SITE_URL",size:"small",label:"Site URL",disabled:!v})})})})]})}})},O=s(7929),T=s(14782);let I=()=>{let e=(0,N.Xo)(i.KA.READ,"custom_config_gotrue");return(0,N.N4)()&&!e?(0,t.jsx)(T.Z,{isFullPage:!0,resourceText:"access your project's email settings"}):(0,t.jsxs)(g.ld,{children:[(0,t.jsx)(E,{}),(0,t.jsx)(A,{})]})};I.getLayout=e=>(0,t.jsx)(O.g1,{children:e});var P=I},15434:function(e,r,s){"use strict";var t=s(52322);s(2784);var i=s(11157),n=s(2515);r.Z=function(e){return(0,t.jsx)(n.Z,{icon:i.Z,...e})}},11157:function(e,r,s){"use strict";var t=s(2784),i=s(13980),n=s.n(i);function l(){return(l=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e}).apply(this,arguments)}var a=(0,t.forwardRef)(function(e,r){var s=e.color,i=e.size,n=void 0===i?24:i,a=function(e,r){if(null==e)return{};var s,t,i=function(e,r){if(null==e)return{};var s,t,i={},n=Object.keys(e);for(t=0;t<n.length;t++)s=n[t],r.indexOf(s)>=0||(i[s]=e[s]);return i}(e,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)s=n[t],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}(e,["color","size"]);return t.createElement("svg",l({ref:r,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:void 0===s?"currentColor":s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),t.createElement("circle",{cx:"12",cy:"12",r:"10"}),t.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),t.createElement("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}))});a.propTypes={color:n().string,size:n().oneOfType([n().string,n().number])},a.displayName="Globe",r.Z=a}},function(e){e.O(0,[667,9678,8183,8421,3844,9785,7263,9818,9595,5191,7127,9104,6917,8601,7309,9229,3832,8475,626,496,1273,8020,7298,9774,2888,179],function(){return e(e.s=71372)}),_N_E=e.O()}]);